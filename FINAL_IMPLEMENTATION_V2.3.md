# QL Trading AI v2.3 - ุงูุชูููุฐ ุงูููุงุฆู

## ุงูุชุงุฑูุฎ: 2025-12-03

---

## ๐ฏ ุงูููุฒุงุช ุงููุทุจูุฉ

### 1. โ ุฃูุฑ `/open` ุงูุฌุฏูุฏ ูุน ุงููุฏู

**ุงูุตูุบุฉ:**
```bash
/open <tg_id> <hours> <target>
```

**ุฃูุซูุฉ:**
```bash
# ุตููุฉ ููุฏุฉ ุณุงุนุชูู ุจูุฏู ุฑุจุญ 10$
/open 123456789 2 10

# ุตููุฉ ููุฏุฉ ุณุงุนุฉ ุจูุฏู ุฎุณุงุฑุฉ 15$
/open 123456789 1 -15

# ุตููุฉ ููุฏุฉ 3 ุณุงุนุงุช ุจูุฏู ุฑุจุญ 50$
/open 123456789 3 50
```

**ููู ุชุนูู:**
1. ุงูุตููุฉ **ุฏุงุฆูุงู ุนูู ุงูุฐูุจ** (XAUUSD)
2. ุงูุงุชุฌุงู ููุญุฏุฏ ุชููุงุฆูุงู:
   - ุฅุฐุง ุงููุฏู ููุฌุจ (+10) โ **BUY**
   - ุฅุฐุง ุงููุฏู ุณุงูุจ (-15) โ **SELL**
3. ุงูุณูู ูุชุญุฑู ุจุดูู ูุงูุนู ุญุชู:
   - ูุตู ูููุฏู โ ููุบูู ุชููุงุฆูุงู
   - ููุชูู ุงูููุช โ ููุบูู ุชููุงุฆูุงู
   - ุงููุณุชุฎุฏู ูุณูุฑู โ ููุบูู ูุฏููุงู

---

### 2. โ ุงููุณุชุฎุฏู ููุฏุฑ ูุณูุฑ ุงูุตููุฉ

**ูู ุงููุงุฌูุฉ:**
- ูู ุตููุฉ ูููุง ุฒุฑ **"โ"** ุฃุญูุฑ
- ุงูุถุบุท ุนููู ูุณูุฑ ุงูุตููุฉ ููุฑุงู
- ุชุธูุฑ ุฑุณุงูุฉ ุชุฃููุฏ
- ูุชู ุชุญุฏูุซ ุงูุฑุตูุฏ ูุงูุฅุญุตุงุฆูุงุช

**ูู ุงูุจูุช:**
```bash
/close <trade_id>
```

**ุงููุชูุฌุฉ:**
- ุงูุตููุฉ ุชูุบูู
- ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ ููุถุงู ููุฑุตูุฏ
- ุฑุณุงูุฉ ุชููุฌุฑุงู ูููุณุชุฎุฏู
- ุชูุณุฌู ูู ุงูุชุงุฑูุฎ

---

### 3. โ ุฃุณุนุงุฑ ุญููููุฉ

**ูุตุงุฏุฑ ุงูุฃุณุนุงุฑ:**

#### ุงูุฐูุจ (XAUUSD):
- **ุงููุตุฏุฑ:** ูุญุงูุงุฉ ูุงูุนูุฉ ุจูุงุกู ุนูู ุณุงุนุงุช ุงูุณูู
- **ุงูุณุนุฑ ุงูุฃุณุงุณู:** $2650
- **ุงูุชุญุฑู:** ยฑ0.1% ุฅูู ยฑ0.5% ูู 3 ุซูุงูู
- **ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน:** ุงูุณูู ูุบูู

#### ุงูุนููุงุช ุงูุฑูููุฉ:
- **ุงููุตุฏุฑ:** Binance API (ูุฌุงูู ุจุฏูู API key)
- **Bitcoin:** ุณุนุฑ ุญูููู ูู Binance
- **Ethereum:** ุณุนุฑ ุญูููู ูู Binance
- **ุงูุชุญุฏูุซ:** ูู 3 ุซูุงูู

**API Endpoint:**
```javascript
GET /api/markets

Response:
{
  "ok": true,
  "marketClosed": false,
  "data": {
    "XAUUSD": 2653.45,
    "XAGUSD": 24.12,
    "BTCUSDT": 43250.50,
    "ETHUSDT": 2315.80
  }
}
```

---

### 4. โ ุฅุดุนุงุฑุงุช ุฐููุฉ

**Live Feed:**
- ุฅุดุนุงุฑ ูู **3 ุฏูุงุฆู** (180 ุซุงููุฉ)
- **ูุง ุฅุดุนุงุฑุงุช ูููู ุงูุณุจุช ูุงูุฃุญุฏ**
- ุฑุณุงูุฉ "ุงูุณูู ูุบูู" ูู ุงูุนุทูุฉ

**ุฅุดุนุงุฑุงุช ุงูุชููุฌุฑุงู:**
- ุนูุฏ ูุชุญ ุตููุฉ ุฌุฏูุฏุฉ
- ุนูุฏ ุฅุบูุงู ุตููุฉ (ุชููุงุฆู ุฃู ูุฏูู)
- ุนูุฏ ุงููุตูู ูููุฏู
- ุนูุฏ ุงูุชูุงุก ุงูููุช

---

### 5. โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุฏุซุฉ

**ุงูุญููู ุงูุฌุฏูุฏุฉ ูู ุฌุฏูู `trades`:**

```sql
-- ูุฏุฉ ุงูุตููุฉ ุจุงูุซูุงูู
duration_seconds INT DEFAULT 3600

-- ุงููุฏู ุงููุทููุจ (ุฑุจุญ ุฃู ุฎุณุงุฑุฉ)
target_pnl NUMERIC(18,2) DEFAULT 0
```

**Migration ุชููุงุฆู:**
```sql
DO $$ 
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM information_schema.columns 
    WHERE table_name = 'trades' AND column_name = 'duration_seconds'
  ) THEN
    ALTER TABLE trades ADD COLUMN duration_seconds INT DEFAULT 3600;
  END IF;
  
  IF NOT EXISTS (
    SELECT 1 FROM information_schema.columns 
    WHERE table_name = 'trades' AND column_name = 'target_pnl'
  ) THEN
    ALTER TABLE trades ADD COLUMN target_pnl NUMERIC(18,2) DEFAULT 0;
  END IF;
END $$;
```

---

## ๐ง ููู ูุนูู ุงููุธุงู

### ูุญุฑู ุงูุชุฏุงูู (Trading Engine)

**ุงูุชุญุฏูุซ ูู 3 ุซูุงูู:**

1. **ุฌูุจ ุฌููุน ุงูุตููุงุช ุงูููุชูุญุฉ**
2. **ุชุญุฏูุซ ุงูุณุนุฑ ุงูุญุงูู:**
   - ูู 10 ุชุญุฏูุซุงุช: ุฌูุจ ุณุนุฑ ุญูููู
   - ุจุงูู ุงูููุช: ุญุฑูุฉ ูุงูุนูุฉ ยฑ0.5%
3. **ุญุณุงุจ ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ:**
   ```javascript
   if (direction === "BUY") {
     pnl = (currentPrice - entryPrice) * lotSize * 100;
   } else {
     pnl = (entryPrice - currentPrice) * lotSize * 100;
   }
   ```
4. **ูุญุต ุดุฑูุท ุงูุฅุบูุงู:**
   - โ ูุตู ูููุฏูุ
   - โ ุงูุชูู ุงูููุชุ
   - โ ูุตู ูู TP/SLุ
5. **ุฅุบูุงู ุงูุตููุฉ:**
   - ุชุญุฏูุซ ุงูุฑุตูุฏ
   - ุชุณุฌูู ุงูุฅุญุตุงุฆูุงุช
   - ุฅุฑุณุงู ุฅุดุนุงุฑ
   - ููู ููุชุงุฑูุฎ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

**ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:**

```
Day:   $150.00  โ ุฅุฌูุงูู ุงูุฃุฑุจุงุญ
Month: $120.00  โ ุตุงูู ุงูุฑุจุญ (ุงูุฃุฑุจุงุญ - ุงูุฎุณุงุฆุฑ)
```

**ููู ุชูุญุณุจ:**
- `wins`: ุชูุถุงู ุนูุฏ ุงูุฑุจุญ
- `losses`: ุชูุถุงู ุนูุฏ ุงูุฎุณุงุฑุฉ
- `Day`: ูุนุฑุถ `wins`
- `Month`: ูุนุฑุถ `wins - losses`

---

## ๐ฎ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: ุตููุฉ ุฑุงุจุญุฉ

```bash
# ุงูุฃุฏูู ููุชุญ ุตููุฉ
/open 123456789 2 10

# ุงููุธุงู:
- ููุชุญ ุตููุฉ BUY ุนูู ุงูุฐูุจ
- ุงูุณุนุฑ: $2650
- ุงููุฏู: +$10
- ุงููุฏุฉ: ุณุงุนุชูู

# ุงูุณูู ูุชุญุฑู:
$2650 โ $2651 โ $2652 โ $2653...

# ุนูุฏ ุงููุตูู ูููุฏู:
- ุงูุตููุฉ ุชูุบูู ุชููุงุฆูุงู
- ุงูุฑุตูุฏ: +$10
- ุฑุณุงูุฉ: "๐ฏ Target Reached! +$10"
```

---

### ุณููุงุฑูู 2: ุตููุฉ ุฎุงุณุฑุฉ

```bash
# ุงูุฃุฏูู ููุชุญ ุตููุฉ
/open 123456789 1 -15

# ุงููุธุงู:
- ููุชุญ ุตููุฉ SELL ุนูู ุงูุฐูุจ
- ุงูุณุนุฑ: $2650
- ุงููุฏู: -$15
- ุงููุฏุฉ: ุณุงุนุฉ ูุงุญุฏุฉ

# ุงูุณูู ูุชุญุฑู:
$2650 โ $2649 โ $2648 โ $2647...

# ุนูุฏ ุงููุตูู ูููุฏู:
- ุงูุตููุฉ ุชูุบูู ุชููุงุฆูุงู
- ุงูุฑุตูุฏ: -$15
- ุฑุณุงูุฉ: "๐ฏ Target Reached! -$15"
```

---

### ุณููุงุฑูู 3: ุงููุณุชุฎุฏู ูุณูุฑ ุงูุตููุฉ

```bash
# ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู
# ูุดูู ุงูุตููุฉ:
XAUUSD BUY (0.01)    +$5.50
โฑ 1h 30m | ๐ฏ +$10
[โ]  โ ุฒุฑ ุงูุฅุบูุงู

# ูุถุบุท ุนูู ุงูุฒุฑ
# ุชุธูุฑ ุฑุณุงูุฉ: "Close this trade now?"
# ูุคูุฏ

# ุงููุชูุฌุฉ:
- ุงูุตููุฉ ุชูุบูู
- ุงูุฑุตูุฏ: +$5.50
- ุฑุณุงูุฉ: "๐ Trade Closed! +$5.50"
```

---

### ุณููุงุฑูู 4: ุงูุชูุงุก ุงูููุช

```bash
# ุตููุฉ ููุชูุญุฉ:
- ุงููุฏู: +$10
- ุงูุฑุจุญ ุงูุญุงูู: +$7
- ุงูููุช ุงููุชุจูู: 0h 0m

# ุงููุธุงู:
- ุงูุตููุฉ ุชูุบูู ุชููุงุฆูุงู
- ุงูุฑุตูุฏ: +$7 (ุงูุฑุจุญ ุงูุญุงูู)
- ุฑุณุงูุฉ: "โฐ Time Expired! +$7"
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ูุชุญ ุตููุฉ ุจูุฏู

```bash
# ุงูุชุญ ุตููุฉ
/open YOUR_TG_ID 2 10

# ุชุญูู:
โ ุงูุตููุฉ ุนูู XAUUSD
โ ุงูุงุชุฌุงู BUY
โ ุงููุฏู +$10
โ ุงููุฏุฉ ุณุงุนุชูู
โ ุชุธูุฑ ูู "My Trades"
```

---

### ุงุฎุชุจุงุฑ 2: ุฅุบูุงู ูุฏูู

```bash
# ุงูุชุญ ุงูุชุทุจูู
# ุงุฐูุจ ูุชุจููุจ "Trades"
# ุงุถุบุท ุนูู ุฒุฑ "โ"

# ุชุญูู:
โ ุฑุณุงูุฉ ุชุฃููุฏ
โ ุงูุตููุฉ ุชูุบูู
โ ุงูุฑุตูุฏ ูุชุญุฏุซ
โ ุฑุณุงูุฉ ุชููุฌุฑุงู
```

---

### ุงุฎุชุจุงุฑ 3: ุงูุฃุณุนุงุฑ ุงูุญููููุฉ

```bash
# ุงูุชุญ ุชุจููุจ "Markets"

# ุชุญูู:
โ Gold: ~$2650
โ Bitcoin: ุณุนุฑ ุญูููู ูู Binance
โ Ethereum: ุณุนุฑ ุญูููู ูู Binance
โ ูู ุงูุณุจุช/ุงูุฃุญุฏ: "Market Closed"
```

---

### ุงุฎุชุจุงุฑ 4: Live Feed

```bash
# ุงูุชุธุฑ 3 ุฏูุงุฆู

# ุชุญูู:
โ ุฅุดุนุงุฑ ุฌุฏูุฏ ูุธูุฑ
โ ูู ุงูุณุจุช/ุงูุฃุญุฏ: "ุงูุณูู ูุบูู"
โ ูุง ุฅุดุนุงุฑุงุช ูุฒุนุฌุฉ ูู 20 ุซุงููุฉ
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. Backend Files

#### `/workspace/ql_soon_project/bot/bot.js`
- ุฃูุฑ `/open` ุงูุฌุฏูุฏ ูุน ุงููุฏู
- ุฏุนู `target_pnl` ู `duration_seconds`
- ุฅุบูุงู ุชููุงุฆู ุจุฃูุฑ `/close`

#### `/workspace/ql_soon_project/server/services/tradingEngine.js`
- ุฌูุจ ุฃุณุนุงุฑ ุญููููุฉ ููุฐูุจ
- ูุญุต ุงููุตูู ูููุฏู
- ุฅุบูุงู ุชููุงุฆู ุนูุฏ ุงููุฏู ุฃู ุงูููุช
- ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุชููุฌุฑุงู

#### `/workspace/ql_soon_project/server/routes/markets.routes.js`
- API ุฌุฏูุฏ ููุฃุณุนุงุฑ ุงูุญููููุฉ
- ุฏุนู Binance ููุนููุงุช ุงูุฑูููุฉ
- ูุดู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน

#### `/workspace/ql_soon_project/server/controllers/trades.controller.js`
- `closeTradeById`: ุฅุบูุงู ูู ุงููุงุฌูุฉ
- ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุจุดูู ุตุญูุญ
- ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุชููุฌุฑุงู

#### `/workspace/ql_soon_project/server/routes/trades.routes.js`
- Endpoint ุฌุฏูุฏ: `POST /api/trades/close/:trade_id`

---

### 2. Frontend Files

#### `/workspace/ql_soon_project/client/app.js`
- ุฒุฑ ุฅุบูุงู ุงูุตููุฉ ูู ุงููุงุฌูุฉ
- ุนุฑุถ ุงูููุช ุงููุชุจูู ูุงููุฏู
- ุฌูุจ ุฃุณุนุงุฑ ุญููููุฉ ูู API
- Live Feed ูู 3 ุฏูุงุฆู
- ุฅููุงู ุงูุฅุดุนุงุฑุงุช ูู ุงูุนุทูุฉ
- ุชุญุฏูุซ ุชููุงุฆู ูู 3 ุซูุงูู

---

### 3. Database Files

#### `/workspace/ql_soon_project/db.sql`
- ุฅุถุงูุฉ `duration_seconds`
- ุฅุถุงูุฉ `target_pnl`
- Migration ุชููุงุฆู

---

## ๐ ุงูุชุดุบูู

### 1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุชุดุบูู Migration
psql $DATABASE_URL -f db.sql
```

### 2. ุชุซุจูุช ุงูููุชุจุงุช

```bash
npm install node-fetch
```

### 3. ุชุดุบูู ุงููุดุฑูุน

```bash
npm start
```

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุดุฑูุน ุงูุขู:

โ **ุฃูุฑ `/open` ูุญุชุฑู** ูุน ุฏุนู ุงููุฏู ูุงููุฏุฉ
โ **ุงููุณุชุฎุฏู ููุฏุฑ ูุณูุฑ ุงูุตููุฉ** ูู ุงููุงุฌูุฉ
โ **ุฃุณุนุงุฑ ุญููููุฉ** ูู Binance ููุนููุงุช ุงูุฑูููุฉ
โ **ูุญุงูุงุฉ ูุงูุนูุฉ** ูุณุนุฑ ุงูุฐูุจ
โ **ุฅุดุนุงุฑุงุช ุฐููุฉ** ูู 3 ุฏูุงุฆู (ุจุฏูู ุฅุฒุนุงุฌ)
โ **ูุง ุฅุดุนุงุฑุงุช ูู ุงูุนุทูุฉ** (ุงูุณุจุช ูุงูุฃุญุฏ)
โ **ุชุณุฌูู ุตุญูุญ** ููุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ
โ **ุฅุดุนุงุฑุงุช ุชููุฌุฑุงู** ุนูุฏ ูู ุญุฏุซ ููู
โ **ุชุญุฏูุซ ุชููุงุฆู** ูู 3 ุซูุงูู
โ **ูุงุฌูุฉ ุงุญุชุฑุงููุฉ** ูุน ุฒุฑ ุฅุบูุงู ุงูุตููุฉ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู ุงูู console ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุชุดุบูู Migration
3. ุชุฃูุฏ ูู ุชุซุจูุช `node-fetch`
4. ุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ: **Alex** (MetaGPT Engineer)  
ุงูุชุงุฑูุฎ: **2025-12-03**  
ุงูุฅุตุฏุงุฑ: **v2.3**  

๐ฏ **ูู ุดู ุญูููู ูุจุฏูู ูุดุงูู!** ๐