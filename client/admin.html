<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ููุญุฉ ุฅุฏุงุฑุฉ QL Trading</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/admin.css">
</head>
<body>
  <div class="bg"></div>

  <!-- Login Screen -->
  <section id="login" class="login-screen">
    <div class="login-card glass">
      <div class="login-header">
        <h1>๐ ููุญุฉ ุงูุฅุฏุงุฑุฉ</h1>
        <p>Admin Panel</p>
      </div>
      <div class="login-form">
        <input id="admTok" class="input" type="password" placeholder="ูููุฉ ุงููุฑูุฑ / Password"/>
        <button id="admBtn" class="btn">ุฏุฎูู</button>
      </div>
      <div id="msg" class="msg"></div>
    </div>
  </section>

  <!-- Main Panel -->
  <section id="panel" class="hidden">
    <header class="top-bar glass">
      <h1>๐๏ธ ููุญุฉ ุฅุฏุงุฑุฉ QL Trading</h1>
      <div class="header-actions">
        <span id="adminStatus" class="status-badge">๐ข ูุชุตู</span>
        <button id="logoutBtn" class="btn-small">ุฎุฑูุฌ</button>
      </div>
    </header>

    <nav class="tabs glass">
      <button class="tab-btn active" data-tab="dash">๐ ููุญุฉ ุงูุชุญูู</button>
      <button class="tab-btn" data-tab="users">๐ฅ ุงููุณุชุฎุฏููู</button>
      <button class="tab-btn" data-tab="wd">๐ธ ุงูุณุญูุจุงุช</button>
      <button class="tab-btn" data-tab="tr">๐ ุงูุตููุงุช</button>
      <button class="tab-btn" data-tab="settings">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
    </nav>

    <main class="content">
      <!-- Dashboard Tab -->
      <section id="tab-dash" class="tab-content active">
        <div class="kpi-grid">
          <div class="kpi-card glass">
            <div class="kpi-icon">๐ฅ</div>
            <div class="kpi-data">
              <span class="kpi-value" id="k-users">0</span>
              <span class="kpi-label">ูุณุชุฎุฏููู</span>
            </div>
          </div>
          <div class="kpi-card glass">
            <div class="kpi-icon">๐ฐ</div>
            <div class="kpi-data">
              <span class="kpi-value" id="k-dep">$0</span>
              <span class="kpi-label">ุฅุฌูุงูู ุงูุฅูุฏุงุนุงุช</span>
            </div>
          </div>
          <div class="kpi-card glass">
            <div class="kpi-icon">๐ธ</div>
            <div class="kpi-data">
              <span class="kpi-value" id="k-wd">$0</span>
              <span class="kpi-label">ุฅุฌูุงูู ุงูุณุญูุจุงุช</span>
            </div>
          </div>
          <div class="kpi-card glass">
            <div class="kpi-icon">๐</div>
            <div class="kpi-data">
              <span class="kpi-value" id="k-open">0</span>
              <span class="kpi-label">ุตููุงุช ููุชูุญุฉ</span>
            </div>
          </div>
        </div>

        <div class="card glass">
          <div class="card-header">
            <h3>๐ ุขุฎุฑ ุงููุดุงุท</h3>
          </div>
          <div id="recent" class="table-container"></div>
        </div>
      </section>

      <!-- Users Tab -->
      <section id="tab-users" class="tab-content">
        <div class="card glass">
          <div class="card-header">
            <h3>๐ ุงูุจุญุซ ุนู ูุณุชุฎุฏู</h3>
          </div>
          <div class="search-box">
            <input id="searchInput" class="input" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู Telegram ID"/>
            <button id="searchBtn" class="btn">ุจุญุซ</button>
          </div>
        </div>

        <!-- User Details Card (Hidden by default) -->
        <div id="userDetails" class="card glass hidden">
          <div class="card-header">
            <h3>๐ค ุชูุงุตูู ุงููุณุชุฎุฏู</h3>
            <button id="closeUserDetails" class="btn-small">โ</button>
          </div>
          <div class="user-info">
            <div class="user-row">
              <span class="label">ID:</span>
              <span id="ud-id" class="value">-</span>
            </div>
            <div class="user-row">
              <span class="label">Telegram ID:</span>
              <span id="ud-tgid" class="value">-</span>
            </div>
            <div class="user-row">
              <span class="label">ุงูุงุณู:</span>
              <span id="ud-name" class="value">-</span>
            </div>
            <div class="user-row">
              <span class="label">ุงูุจุฑูุฏ:</span>
              <span id="ud-email" class="value">-</span>
            </div>
            <div class="user-row">
              <span class="label">ุงูุฑุตูุฏ:</span>
              <span id="ud-balance" class="value highlight">$0</span>
            </div>
            <div class="user-row">
              <span class="label">ุงูุงุดุชุฑุงู:</span>
              <span id="ud-sub" class="value">-</span>
            </div>
          </div>
          
          <div class="action-section">
            <h4>๐ฐ ุฅุฏุงุฑุฉ ุงูุฑุตูุฏ</h4>
            <div class="action-row">
              <input id="balanceAmount" type="number" class="input small" placeholder="ุงููุจูุบ"/>
              <button id="addBalanceBtn" class="btn success">+ ุฅุถุงูุฉ</button>
              <button id="removeBalanceBtn" class="btn danger">- ุฎุตู</button>
              <button id="zeroBalanceBtn" class="btn warning">ุชุตููุฑ</button>
            </div>
          </div>

          <div class="action-section">
            <h4>๐ ุชูุฏูุฏ ุงูุงุดุชุฑุงู</h4>
            <div class="action-row">
              <input id="subDays" type="number" class="input small" placeholder="ุนุฏุฏ ุงูุฃูุงู"/>
              <button id="extendSubBtn" class="btn">ุชูุฏูุฏ</button>
            </div>
          </div>

          <div class="action-section">
            <h4>๐ ุฅุถุงูุฉ ุตููุฉ</h4>
            <div class="action-row">
              <input id="tradePnl" type="number" class="input small" placeholder="ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ"/>
              <input id="tradeHours" type="number" class="input small" placeholder="ุงููุฏุฉ (ุณุงุนุงุช)"/>
              <button id="addTradeBtn" class="btn">ุฅุถุงูุฉ ุตููุฉ</button>
            </div>
          </div>

          <div class="action-section">
            <h4>๐๏ธ ุฅุฌุฑุงุกุงุช ุฃุฎุฑู</h4>
            <div class="action-row">
              <button id="clearHistoryBtn" class="btn warning">ุชุตููุฑ ุงูุณุฌู</button>
              <button id="banUserBtn" class="btn danger">ุญุธุฑ ุงููุณุชุฎุฏู</button>
            </div>
          </div>
        </div>

        <div class="card glass">
          <div class="card-header">
            <h3>๐ฅ ูุงุฆูุฉ ุงููุณุชุฎุฏููู</h3>
          </div>
          <div id="users" class="table-container"></div>
        </div>
      </section>

      <!-- Withdrawals Tab -->
      <section id="tab-wd" class="tab-content">
        <div class="card glass">
          <div class="card-header">
            <h3>๐ธ ุทูุจุงุช ุงูุณุญุจ</h3>
            <div class="filter-btns">
              <button class="filter-btn active" data-filter="pending">ููุฏ ุงูุงูุชุธุงุฑ</button>
              <button class="filter-btn" data-filter="approved">ููุจููุฉ</button>
              <button class="filter-btn" data-filter="rejected">ูุฑููุถุฉ</button>
              <button class="filter-btn" data-filter="all">ุงููู</button>
            </div>
          </div>
          <div id="wds" class="table-container"></div>
        </div>
      </section>

      <!-- Trades Tab -->
      <section id="tab-tr" class="tab-content">
        <div class="card glass">
          <div class="card-header">
            <h3>๐ ุงูุตููุงุช</h3>
            <div class="filter-btns">
              <button class="filter-btn active" data-filter="open">ููุชูุญุฉ</button>
              <button class="filter-btn" data-filter="closed">ูุบููุฉ</button>
              <button class="filter-btn" data-filter="all">ุงููู</button>
            </div>
          </div>
          <div id="trs" class="table-container"></div>
        </div>
      </section>

      <!-- Settings Tab -->
      <section id="tab-settings" class="tab-content">
        <div class="settings-grid">
          <div class="card glass">
            <div class="card-header">
              <h3>๐ธ ุฅุนุฏุงุฏุงุช ุงูุณุญุจ</h3>
            </div>
            <div class="setting-item">
              <span class="setting-label">ุญุงูุฉ ุงูุณุญุจ:</span>
              <span id="withdrawStatus" class="status-badge">-</span>
              <button id="toggleWithdraw" class="btn-small">ุชุจุฏูู</button>
            </div>
          </div>

          <div class="card glass">
            <div class="card-header">
              <h3>๐๏ธ ูุถุน ุงูุตูุงูุฉ</h3>
            </div>
            <div class="setting-item">
              <span class="setting-label">ุญุงูุฉ ุงูุตูุงูุฉ:</span>
              <span id="maintenanceStatus" class="status-badge">-</span>
              <button id="toggleMaintenance" class="btn-small">ุชุจุฏูู</button>
            </div>
          </div>

          <div class="card glass">
            <div class="card-header">
              <h3>๐ ุฅูุดุงุก ููุชุงุญ ุงุดุชุฑุงู</h3>
            </div>
            <div class="action-row">
              <input id="newKeyCode" class="input" placeholder="ููุฏ ุงูููุชุงุญ"/>
              <input id="newKeyDays" type="number" class="input small" placeholder="ุงูุฃูุงู" value="30"/>
              <button id="createKeyBtn" class="btn">ุฅูุดุงุก</button>
            </div>
          </div>

          <div class="card glass">
            <div class="card-header">
              <h3>๐ข ุฅุฑุณุงู ุฑุณุงูุฉ ุฌูุงุนูุฉ</h3>
            </div>
            <div class="broadcast-form">
              <textarea id="broadcastMsg" class="input textarea" placeholder="ูุต ุงูุฑุณุงูุฉ..."></textarea>
              <button id="broadcastBtn" class="btn">ุฅุฑุณุงู ููุฌููุน</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </section>

  <div id="toast" class="toast"></div>
  <script type="module" src="/admin.js"></script>
</body>
</html>
