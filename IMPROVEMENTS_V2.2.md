# ุชุญุณููุงุช QL Trading AI v2.2

## ุงูุชุงุฑูุฎ: 2025-12-03

---

## ๐ฏ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. โ ุชุญุณูู ุฃูุฑ `/open` - ุฏุนู ูุฏุฉ ุงูุตููุฉ

**ูุจู:**
```bash
/open <tg_id> <symbol> <direction> <lot>
```

**ุจุนุฏ:**
```bash
/open <tg_id> <hours>
# ูุซุงู:
/open 123456789 2      # ุตููุฉ ููุฏุฉ ุณุงุนุชูู
/open 123456789 0.5    # ุตููุฉ ููุฏุฉ ูุตู ุณุงุนุฉ
/open 123456789        # ุตููุฉ ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ (ุงูุชุฑุงุถู)
```

**ุงููููุฒุงุช:**
- โ ุงูุตููุฉ ุฏุงุฆูุงู ุนูู ุงูุฐูุจ (XAUUSD)
- โ ุงูุงุชุฌุงู ูุชู ุงุฎุชูุงุฑู ุนุดูุงุฆูุงู (BUY/SELL)
- โ ูููู ุชุญุฏูุฏ ุงููุฏุฉ ุจุงูุณุงุนุงุช (1ุ 2ุ 3ุ ุฅูุฎ)
- โ ุงูุตููุฉ ุชูุบูู ุชููุงุฆูุงู ุนูุฏ ุงูุชูุงุก ุงููุฏุฉ
- โ ูุธูุฑ ุงูููุช ุงููุชุจูู ูู ูุงุฆูุฉ ุงูุตููุงุช

---

### 2. โ ุฅุบูุงู ุงูุตููุฉ ูู ูุจู ุงููุณุชุฎุฏู

**ุงูููุฒุฉ:**
- ุงููุณุชุฎุฏู ูุณุชุทูุน ุฅุบูุงู ุงูุตููุฉ ูุฏููุงู ูู ุงููุงุฌูุฉ
- ุงูุฃุฏูู ูุณุชุทูุน ุฅุบูุงู ุงูุตููุฉ ุจุฃูุฑ `/close`

**ููููุฉ ุงูุฅุบูุงู:**
```bash
# ูู ูุจู ุงูุฃุฏูู
/close <trade_id> <pnl>
# ูุซุงู:
/close 123 25.50    # ุฅุบูุงู ุงูุตููุฉ ุฑูู 123 ุจุฑุจุญ 25.50$
/close 124 -10.00   # ุฅุบูุงู ุงูุตููุฉ ุฑูู 124 ุจุฎุณุงุฑุฉ 10$
```

---

### 3. โ ุชุณุฌูู ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ ูู ุงูุฅุญุตุงุฆูุงุช

**ูุจู:**
- ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ ูุง ุชูุณุฌู ุจุดูู ุตุญูุญ
- ูุง ููุฌุฏ ููุงู ูุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

**ุจุนุฏ:**
- โ ุชูุณุฌู ุงูุฃุฑุจุงุญ ูู ุญูู `wins`
- โ ุชูุณุฌู ุงูุฎุณุงุฆุฑ ูู ุญูู `losses`
- โ ุชุธูุฑ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
  - **Day**: ุฅุฌูุงูู ุงูุฃุฑุจุงุญ
  - **Month**: ุตุงูู ุงูุฑุจุญ (ุงูุฃุฑุจุงุญ - ุงูุฎุณุงุฆุฑ)
- โ ุชูุณุฌู ูู ุฌุฏูู `ops` ูุณุฌู ุงููุดุงุท

**ูุซุงู:**
```
๐ ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู:
- ุงูุฃุฑุจุงุญ: $150.00
- ุงูุฎุณุงุฆุฑ: $30.00
- ุงูุตุงูู: $120.00
```

---

### 4. โ ุชุญุณูู Live Feed - ูู 3 ุฏูุงุฆู

**ูุจู:**
- ุฅุดุนุงุฑุงุช ูู 20 ุซุงููุฉ (ูุฒุนุฌุฉ)
- ุชุนูู ุญุชู ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน

**ุจุนุฏ:**
- โ ุฅุดุนุงุฑุงุช ูู **3 ุฏูุงุฆู** (180 ุซุงููุฉ)
- โ **ูุง ุชุนูู ูููู ุงูุณุจุช ูุงูุฃุญุฏ**
- โ ุชุธูุฑ ุฑุณุงูุฉ "ุงูุณูู ูุบูู" ูู ุงูุนุทูุฉ

**ุงูููุฏ:**
```javascript
const once = ()=>{
  // ูุง ุชูุธูุฑ ุฅุดุนุงุฑุงุช ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน
  if(!isMarketOpen()){
    push(`๐ ${t('marketClosed')}`);
    return;
  }
  
  // ุฅุดุนุงุฑุงุช ุนุงุฏูุฉ
  // ...
};

state.feedTimer = setInterval(once, 180000); // 3 ุฏูุงุฆู
```

---

### 5. โ ุฅููุงู ุงูุฅุดุนุงุฑุงุช ูููู ุงูุณุจุช ูุงูุฃุญุฏ

**ุงูุชูููุฐ:**
```javascript
function isMarketOpen(){
  const now = new Date();
  const day = now.getDay(); // 0=Sunday, 6=Saturday
  return day !== 0 && day !== 6;
}
```

**ุงููุชูุฌุฉ:**
- โ ุงูุณุจุช (day=6): ุงูุณูู ูุบูู
- โ ุงูุฃุญุฏ (day=0): ุงูุณูู ูุบูู
- โ ุงูุฅุซููู-ุงูุฌูุนุฉ: ุงูุณูู ููุชูุญ

---

### 6. โ ุนุฑุถ ุฃุณุนุงุฑ ุญููููุฉ ูู ุตูุญุฉ ุงูุฃุณูุงู

**ูุจู:**
- ุฃุณุนุงุฑ ุนุดูุงุฆูุฉ ุจุงููุงูู
- ูุง ุชุชุทุงุจู ูุน ุงูุณูู ุงูุญูููู

**ุจุนุฏ:**
- โ ุฃุณุนุงุฑ ูุฑูุจุฉ ูู ุงูุณูู ุงูุญูููู:
  - **Gold (XAUUSD)**: ~$2650
  - **Silver (XAGUSD)**: ~$24
  - **Bitcoin**: ~$43000
  - **Ethereum**: ~$2300
- โ ุชุชุญุฑู ุจุดูู ูุงูุนู (ยฑ2-5%)
- โ ุชุธูุฑ ุฑุณุงูุฉ "ุงูุณูู ูุบูู" ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน

**ุงูููุฏ:**
```javascript
const basePrices = {
  XAUUSD: 2650,   // ุณุนุฑ ุงูุฐูุจ ุงูุญูููู
  XAGUSD: 24,     // ุณุนุฑ ุงููุถุฉ ุงูุญูููู
  BTCUSDT: 43000, // ุณุนุฑ ุงูุจูุชูููู ุงูุญูููู
  ETHUSDT: 2300   // ุณุนุฑ ุงูุฅูุซูุฑููู ุงูุญูููู
};
```

---

### 7. โ ุนุฑุถ ุงูููุช ุงููุชุจูู ููุตููุฉ

**ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ:**
ูู ูุงุฆูุฉ "My Trades"ุ ูุธูุฑ ุงูููุช ุงููุชุจูู ููู ุตููุฉ:

```
XAUUSD BUY (0.01)           +$12.50
โฑ 1h 45m remaining
```

**ุงูููุฏ:**
```javascript
const opened = new Date(trade.opened_at);
const duration = trade.duration_seconds || 3600;
const elapsed = Math.floor((Date.now() - opened.getTime()) / 1000);
const remaining = Math.max(0, duration - elapsed);
const hours = Math.floor(remaining / 3600);
const minutes = Math.floor((remaining % 3600) / 60);
const timeStr = `${hours}h ${minutes}m`;
```

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุชุญุฏูุซุงุช

### ุฅุถุงูุฉ ุญูู `duration_seconds` ูุฌุฏูู `trades`:

```sql
ALTER TABLE trades ADD COLUMN duration_seconds INT DEFAULT 3600;
```

**ุงููุงุฆุฏุฉ:**
- ุชุฎุฒูู ูุฏุฉ ุงูุตููุฉ ุจุงูุซูุงูู
- ุงูุงูุชุฑุงุถู: 3600 ุซุงููุฉ (ุณุงุนุฉ ูุงุญุฏุฉ)
- ููุณุชุฎุฏู ูุฅุบูุงู ุงูุตููุฉ ุชููุงุฆูุงู

---

## ๐ฎ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุฃุฏูู:

#### 1. ูุชุญ ุตููุฉ ุจูุฏุฉ ูุญุฏุฏุฉ:
```bash
# ุตููุฉ ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ (ุงูุชุฑุงุถู)
/open 123456789

# ุตููุฉ ููุฏุฉ ุณุงุนุชูู
/open 123456789 2

# ุตููุฉ ููุฏุฉ 30 ุฏูููุฉ
/open 123456789 0.5

# ุตููุฉ ููุฏุฉ 3 ุณุงุนุงุช
/open 123456789 3
```

**ุงููุชูุฌุฉ:**
- โ ุงูุตููุฉ ุนูู ุงูุฐูุจ (XAUUSD)
- โ ุงูุงุชุฌุงู ุนุดูุงุฆู (BUY/SELL)
- โ ุงูุณุนุฑ ูุฑูุจ ูู ุงูุณูู ุงูุญูููู
- โ ุชูุบูู ุชููุงุฆูุงู ุจุนุฏ ุงููุฏุฉ ุงููุญุฏุฏุฉ

#### 2. ุฅุบูุงู ุตููุฉ ูุฏููุงู:
```bash
/close 123 25.50    # ุฑุจุญ
/close 124 -10.00   # ุฎุณุงุฑุฉ
```

#### 3. ุชุญุฏูุฏ ูุฏู ูููู (ูุง ูุชุบูุฑ):
```bash
/setdaily 123456789 50 1800
```

---

### ูููุณุชุฎุฏู:

#### 1. ูุดุงูุฏุฉ ุงูุตููุงุช:
- ุงูุชูู ุฅูู ุชุจููุจ **"Trades"**
- ุดุงูุฏ ุฌููุน ุงูุตููุงุช ุงูููุชูุญุฉ
- ูุธูุฑ ุงูููุช ุงููุชุจูู ููู ุตููุฉ
- ูุธูุฑ ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ ุงูุญุงููุฉ

#### 2. ูุชุงุจุนุฉ ุงูุฅุญุตุงุฆูุงุช:
- **Day**: ุฅุฌูุงูู ุงูุฃุฑุจุงุญ
- **Month**: ุตุงูู ุงูุฑุจุญ (ุงูุฃุฑุจุงุญ - ุงูุฎุณุงุฆุฑ)

#### 3. Live Feed:
- ุฅุดุนุงุฑุงุช ูู 3 ุฏูุงุฆู
- ูุง ุฅุดุนุงุฑุงุช ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน
- ุชุธูุฑ ุฑุณุงูุฉ "ุงูุณูู ูุบูู" ุงูุณุจุช ูุงูุฃุญุฏ

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

1. **`/workspace/ql_soon_project/bot/bot.js`**
   - ุชุนุฏูู ุฃูุฑ `/open` ูุฏุนู ุงููุฏุฉ
   - ุงูุตููุฉ ุฏุงุฆูุงู ุนูู ุงูุฐูุจ
   - ุฃุณุนุงุฑ ุญููููุฉ

2. **`/workspace/ql_soon_project/client/app.js`**
   - Live Feed ูู 3 ุฏูุงุฆู
   - ุฅููุงู ุงูุฅุดุนุงุฑุงุช ูู ุงูุนุทูุฉ
   - ุนุฑุถ ุงูููุช ุงููุชุจูู ููุตููุฉ
   - ุฃุณุนุงุฑ ุญููููุฉ ูู ุงูุฃุณูุงู
   - ุชุณุฌูู ุงูุฃุฑุจุงุญ/ุงูุฎุณุงุฆุฑ ูู ุงูุฅุญุตุงุฆูุงุช

3. **`/workspace/ql_soon_project/server/services/tradingEngine.js`**
   - ุฏุนู `duration_seconds`
   - ุฅุบูุงู ุชููุงุฆู ุนูุฏ ุงูุชูุงุก ุงููุฏุฉ
   - ุชุญุฏูุซ ุงูุฃุฑุจุงุญ/ุงูุฎุณุงุฆุฑ ุจุดูู ุตุญูุญ

4. **`/workspace/ql_soon_project/db.sql`**
   - ุฅุถุงูุฉ ุญูู `duration_seconds` ูุฌุฏูู `trades`
   - Migration ุชููุงุฆู ููุฌุฏุงูู ุงููุฏููุฉ

---

## โ ุงุฎุชุจุงุฑ ุงูุชุญุณููุงุช

### ุงุฎุชุจุงุฑ 1: ูุชุญ ุตููุฉ ุจูุฏุฉ ูุญุฏุฏุฉ
```bash
/open 123456789 2
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุตููุฉ ุนูู XAUUSD
- โ ูุฏุฉ ุณุงุนุชูู
- โ ุชุธูุฑ ูู "My Trades" ูุน ุงูููุช ุงููุชุจูู
- โ ุชูุบูู ุชููุงุฆูุงู ุจุนุฏ ุณุงุนุชูู

### ุงุฎุชุจุงุฑ 2: Live Feed ูู ุงูุนุทูุฉ
**ุงูุฎุทูุงุช:**
1. ุบููุฑ ุชุงุฑูุฎ ุงููุธุงู ุฅูู ุงูุณุจุช ุฃู ุงูุฃุญุฏ
2. ุงูุชุญ ุงูุชุทุจูู
3. ุงูุชุธุฑ 3 ุฏูุงุฆู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุธูุฑ ุฑุณุงูุฉ "ุงูุณูู ูุบูู (ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน)"
- โ ูุง ุชุธูุฑ ุฅุดุนุงุฑุงุช ุนุงุฏูุฉ

### ุงุฎุชุจุงุฑ 3: ุงูุฅุญุตุงุฆูุงุช
```bash
# ุงูุชุญ ุตููุฉ ูุฃุบูููุง ุจุฑุจุญ
/open 123456789 0.1
/close <trade_id> 25.50

# ุงูุชุญ ุตููุฉ ูุฃุบูููุง ุจุฎุณุงุฑุฉ
/open 123456789 0.1
/close <trade_id> -10.00
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ Day: $25.50
- โ Month: $15.50 (25.50 - 10.00)
- โ ุชุธูุฑ ูู ุณุฌู ุงููุดุงุท

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุดุฑูุน ุงูุขู:
- โ ูุฏุนู ุตููุงุช ุจูุฏุฉ ูุญุฏุฏุฉ (ุณุงุนุฉุ ุณุงุนุชููุ ุฅูุฎ)
- โ ุงูุตููุฉ ุฏุงุฆูุงู ุนูู ุงูุฐูุจ (XAUUSD)
- โ ุงููุณุชุฎุฏู ูุณุชุทูุน ุฅุบูุงู ุงูุตููุฉ
- โ ุชูุณุฌู ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ ุจุดูู ุตุญูุญ
- โ Live Feed ูู 3 ุฏูุงุฆู (ุจุฏูุงู ูู 20 ุซุงููุฉ)
- โ ูุง ุฅุดุนุงุฑุงุช ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน
- โ ุฃุณุนุงุฑ ุญููููุฉ ูู ุตูุญุฉ ุงูุฃุณูุงู
- โ ูุธูุฑ ุงูููุช ุงููุชุจูู ููู ุตููุฉ

---

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ: **Alex** (MetaGPT Engineer)  
ุงูุชุงุฑูุฎ: **2025-12-03**  
ุงูุฅุตุฏุงุฑ: **v2.2**